<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="html/html; charset=utf-8" />
		<title>CWBluetoothManager Class Reference</title>
		<meta id="xcode-display" name="xcode-display" content="render"/>
		<link rel="stylesheet" type="text/css" href="../css/styles.css" media="all" />
		<link rel="stylesheet" type="text/css" media="print" href="../css/stylesPrint.css" />
		<meta name="generator" content="appledoc 2.2 (build 963)" />
	</head>
	<body>
		<header id="top_header">
			<div id="library" class="hideInXcode">
				<h1><a id="libraryTitle" href="../index.html">Connichiwa </a></h1>
				<a id="developerHome" href="../index.html">Mario Schreiner</a>
			</div>
			
			<div id="title" role="banner">
				<h1 class="hideInXcode">CWBluetoothManager Class Reference</h1>
			</div>
			<ul id="headerButtons" role="toolbar">
				<li id="toc_button">
					<button aria-label="Show Table of Contents" role="checkbox" class="open" id="table_of_contents"><span class="disclosure"></span>Table of Contents</button>
				</li>
				<li id="jumpto_button" role="navigation">
					<select id="jumpTo">
	<option value="top">Jump To&#133;</option>
	
	<option value="overview">Overview</option>
	
	
	
	
	<option value="tasks">Tasks</option>
	
	
	
	
	
	<option value="properties">Properties</option>
	
	<option value="//api/name/delegate">&nbsp;&nbsp;&nbsp;&nbsp;delegate</option>
	
	
	
	
	
	
	<option value="instance_methods">Instance Methods</option>
	
	<option value="//api/name/initWithApplicationState:">&nbsp;&nbsp;&nbsp;&nbsp;- initWithApplicationState:</option>
	
	<option value="//api/name/sendNetworkAddressesToDevice:">&nbsp;&nbsp;&nbsp;&nbsp;- sendNetworkAddressesToDevice:</option>
	
	<option value="//api/name/startAdvertising">&nbsp;&nbsp;&nbsp;&nbsp;- startAdvertising</option>
	
	<option value="//api/name/startScanning">&nbsp;&nbsp;&nbsp;&nbsp;- startScanning</option>
	
	<option value="//api/name/stopAdvertising">&nbsp;&nbsp;&nbsp;&nbsp;- stopAdvertising</option>
	
	<option value="//api/name/stopScanning">&nbsp;&nbsp;&nbsp;&nbsp;- stopScanning</option>
	
	
	
</select>
				</li>
			</ul>
		</header>
		<nav id="tocContainer" class="isShowingTOC">
			<ul id="toc" role="tree">
				
<li role="treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#overview">Overview</a></span></li>




<li role="treeitem" id="task_treeitem"><span class="nodisclosure"></span><span class="sectionName"><a href="#tasks">Tasks</a></span><ul>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#properties">Properties</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/delegate">delegate</a></span></li>
	
</ul></li>





<li role="treeitem" class="children"><span class="disclosure"></span><span class="sectionName"><a href="#instance_methods">Instance Methods</a></span><ul>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/initWithApplicationState:">initWithApplicationState:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/sendNetworkAddressesToDevice:">sendNetworkAddressesToDevice:</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/startAdvertising">startAdvertising</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/startScanning">startScanning</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/stopAdvertising">stopAdvertising</a></span></li>
	
	<li><span class="nodisclosure"></span><span class="sectionName"><a href="#//api/name/stopScanning">stopScanning</a></span></li>
	
</ul></li>


			</ul>
		</nav>
		<article>
			<div id="contents" class="isShowingTOC" role="main">
				<a title="CWBluetoothManager Class Reference" name="top"></a>
				<div class="main-navigation navigation-top">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="header">
					<div class="section-header">
						<h1 class="title title-header">CWBluetoothManager Class Reference</h1>
					</div>		
				</div>
				<div id="container">	
					
					<div class="section section-specification"><table cellspacing="0"><tbody>
						<tr>
	<td class="specification-title">Inherits from</td>
	<td class="specification-value">NSObject</td>
</tr><tr>
	<td class="specification-title">Declared in</td>
	<td class="specification-value">CWBluetoothManager.h</td>
</tr>
						</tbody></table></div>
					
                    
                    
					
					<div class="section section-overview">
						<a title="Overview" name="overview"></a>
						<h2 class="subtitle subtitle-overview">Overview</h2>
						<p>The CWBluetoothManager represents this device as a BT device. It can advertise this device to other devices and monitor for other devices. Furthermore, the delegate
is notified of important events, for example detected devices, changes in device distance or established connections.</p>

<p>There are two major features when it comes to communicating with other BT devices: The initial data transfer and the IP data transfer.</p>

<p>The initial data transfer is used to receive information about another device - most importantly this includes the other device&rsquo;s unique identifier (which is different from the BT identifier, as the BT identifier is NOT unique). The device&rsquo;s unique identifier can be used to identify the device across all Connichiwa components - this means the identifier will also be sent to the web library and web application. As every remote device needs to have an identifier, the initial data transfer is invoked automatically by this manager when a new device is detected. There is no manual way to trigger the transfer and there is no way to prevent it. Once the initial data of a device was received, the device is reported to the delegate via <a href="../Protocols/CWBluetoothManagerDelegate.html#//api/name/deviceDetected:">[CWBluetoothManagerDelegate deviceDetected:]</a>.
Technically, the initial data transfer is invoked by our central subscribing to the other device&rsquo;s peripheral&rsquo;s initial BT characteristic. The other device will take a subscription to that characteristic as a request for the initial data and begin the data transfer. Therefore, the initial data transfer is a peripheral->central data transfer. Once the initial data transfer is complete, the BT connection to the device will be cut.</p>

<p>The IP data transfer is not triggered automatically, but can be triggered by calling the sendNetworkAddressesToDevice: method. This will trigger a connect to the other device and we  will then transfer our network interface addresses to the other device - one of those should work to connect to our local webserver, but it is the responsibility of the other device to figure our the correct address and actually connect to it. Once the other device received the addresses, it will find the correct one and report it on the other device via <a href="../Protocols/CWBluetoothManagerDelegate.html#//api/name/didReceiveDeviceURL:">[CWBluetoothManagerDelegate didReceiveDeviceURL:]</a>. Connecting to that IP on the other device will allow us to use that device as a remote device.
Technically, this is achieved by our central subscribing to the other device&rsquo;s peripheral&rsquo;s IP BT characteristic. The IP characteristic is writeable and therefore allows us to send our network interface addresses to the other device. All other data sent will be ignored.</p>
					</div>
					
					
					
					
					
					<div class="section section-tasks">
						<a title="Tasks" name="tasks"></a>
						<h2 class="subtitle subtitle-tasks">Tasks</h2>
						
						
						
						

						<ul class="task-list">
							<li>
	<span class="tooltip">
		<code><a href="#//api/name/delegate">&nbsp;&nbsp;delegate</a></code>
	</span>
	<span class="task-item-suffix">property</span>
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/initWithApplicationState:">&ndash;&nbsp;initWithApplicationState:</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/startScanning">&ndash;&nbsp;startScanning</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/startAdvertising">&ndash;&nbsp;startAdvertising</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/stopScanning">&ndash;&nbsp;stopScanning</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/stopAdvertising">&ndash;&nbsp;stopAdvertising</a></code>
	</span>
	
	
</li><li>
	<span class="tooltip">
		<code><a href="#//api/name/sendNetworkAddressesToDevice:">&ndash;&nbsp;sendNetworkAddressesToDevice:</a></code>
	</span>
	
	
</li>
						</ul>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Properties" name="properties"></a>
						<h2 class="subtitle subtitle-methods">Properties</h2>
						
						<div class="section-method">
	<a name="//api/name/delegate" title="delegate"></a>
	<h3 class="subsubtitle method-title">delegate</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>The delegate that receives events by this class</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>@property (readwrite) id&lt;CWBluetoothManagerDelegate&gt; delegate</code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">CWBluetoothManager.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
					
					
					
					<div class="section section-methods">
						<a title="Instance Methods" name="instance_methods"></a>
						<h2 class="subtitle subtitle-methods">Instance Methods</h2>
						
						<div class="section-method">
	<a name="//api/name/initWithApplicationState:" title="initWithApplicationState:"></a>
	<h3 class="subsubtitle method-title">initWithApplicationState:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Intializes a new CWBluetoothManager</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (instancetype)initWithApplicationState:(id&lt;CWWebApplicationState&gt;)<em>appState</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>appState</em></dt>
			<dd><p>A <a href="../Protocols/CWWebApplicationState.html">CWWebApplicationState</a> implementation that allows the BT Manager to access the global state</p></dd>
		</dl>
		
	</div>
	
	
	
	<div class="method-subsection return">
		<h4 class="method-subtitle parameter-title">Return Value</h4>
		<p>A new instance of CWBluetoothManager</p>
	</div>
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">CWBluetoothManager.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/sendNetworkAddressesToDevice:" title="sendNetworkAddressesToDevice:"></a>
	<h3 class="subsubtitle method-title">sendNetworkAddressesToDevice:</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Tells the BTManager to send our network interface addresses to the device with the given identifier. The manager will then try to establish a BT connection to that device and transfer the network addresses. This is effectively a request to use the given device as a remote device.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)sendNetworkAddressesToDevice:(NSString *)<em>deviceIdentifier</em></code></div>

    
	
	<div class="method-subsection arguments-section parameters">
		<h4 class="method-subtitle parameter-title">Parameters</h4>
		
		<dl class="argument-def parameter-def">
			<dt><em>deviceIdentifier</em></dt>
			<dd><p>The identifier of the other device</p></dd>
		</dl>
		
	</div>
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">CWBluetoothManager.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/startAdvertising" title="startAdvertising"></a>
	<h3 class="subsubtitle method-title">startAdvertising</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Starts advertising this device with the unique identifier stored in the application state. Will make this device detectable by other BT devices.</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)startAdvertising</code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">CWBluetoothManager.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/startScanning" title="startScanning"></a>
	<h3 class="subsubtitle method-title">startScanning</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Starts scanning for other, nearby devices</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)startScanning</code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">CWBluetoothManager.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/stopAdvertising" title="stopAdvertising"></a>
	<h3 class="subsubtitle method-title">stopAdvertising</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Stops advertising this device</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)stopAdvertising</code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">CWBluetoothManager.h</code><br />
	</div>				
	
	
</div>
						
						<div class="section-method">
	<a name="//api/name/stopScanning" title="stopScanning"></a>
	<h3 class="subsubtitle method-title">stopScanning</h3>
	
	
	
	<div class="method-subsection brief-description">
		<p>Stops scanning for other devices</p>
	</div>		
	
    

	<div class="method-subsection method-declaration"><code>- (void)stopScanning</code></div>

    
	
	
	
	
	
	
	
	
	
	
	
	
	
	<div class="method-subsection declared-in-section">
		<h4 class="method-subtitle">Declared In</h4>
		<code class="declared-in-ref">CWBluetoothManager.h</code><br />
	</div>				
	
	
</div>
						
					</div>
					
					
                    
                    
				</div>
				<div class="main-navigation navigation-bottom">
					<ul>
	<li><a href="../index.html">Index</a></li>
	<li><a href="../hierarchy.html">Hierarchy</a></li>
</ul>
				</div>
				<div id="footer">
					<hr />
					<div class="footer-copyright">
						<p><span class="copyright">&copy; 2014 Mario Schreiner. All rights reserved. (Last updated: 2014-06-25)</span><br />
						
						<span class="generator">Generated by <a href="http://appledoc.gentlebytes.com">appledoc 2.2 (build 963)</a>.</span></p>
						
					</div>
				</div>
			</div>
		</article>
		<script type="text/javascript">
			function jumpToChange()
			{
				window.location.hash = this.options[this.selectedIndex].value;
			}
			
			function toggleTOC()
			{
				var contents = document.getElementById('contents');
				var tocContainer = document.getElementById('tocContainer');
				
				if (this.getAttribute('class') == 'open')
				{
					this.setAttribute('class', '');
					contents.setAttribute('class', '');
					tocContainer.setAttribute('class', '');
					
					window.name = "hideTOC";
				}
				else
				{
					this.setAttribute('class', 'open');
					contents.setAttribute('class', 'isShowingTOC');
					tocContainer.setAttribute('class', 'isShowingTOC');
					
					window.name = "";
				}
				return false;
			}
			
			function toggleTOCEntryChildren(e)
			{
				e.stopPropagation();
				var currentClass = this.getAttribute('class');
				if (currentClass == 'children') {
					this.setAttribute('class', 'children open');
				}
				else if (currentClass == 'children open') {
					this.setAttribute('class', 'children');
				}
				return false;
			}
			
			function tocEntryClick(e)
			{
				e.stopPropagation();
				return true;
			}
			
			function init()
			{
				var selectElement = document.getElementById('jumpTo');
				selectElement.addEventListener('change', jumpToChange, false);
				
				var tocButton = document.getElementById('table_of_contents');
				tocButton.addEventListener('click', toggleTOC, false);
				
				var taskTreeItem = document.getElementById('task_treeitem');
				if (taskTreeItem.getElementsByTagName('li').length > 0)
				{
					taskTreeItem.setAttribute('class', 'children');
					taskTreeItem.firstChild.setAttribute('class', 'disclosure');
				}
				
				var tocList = document.getElementById('toc');
				
				var tocEntries = tocList.getElementsByTagName('li');
				for (var i = 0; i < tocEntries.length; i++) {
					tocEntries[i].addEventListener('click', toggleTOCEntryChildren, false);
				}
				
				var tocLinks = tocList.getElementsByTagName('a');
				for (var i = 0; i < tocLinks.length; i++) {
					tocLinks[i].addEventListener('click', tocEntryClick, false);
				}
				
				if (window.name == "hideTOC") {
					toggleTOC.call(tocButton);
				}
			}
			
			window.onload = init;
			
			// If showing in Xcode, hide the TOC and Header
			if (navigator.userAgent.match(/xcode/i)) {
				document.getElementById("contents").className = "hideInXcode"
				document.getElementById("tocContainer").className = "hideInXcode"
				document.getElementById("top_header").className = "hideInXcode"
			}
			
		</script>
	</body>
</html>